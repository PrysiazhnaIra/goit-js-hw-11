{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// @import url('./js/pixabay-api.js');\n// @import url('./js/render-function.js');\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nvar lightbox = new SimpleLightbox('.gallery_block a', {captionsData: \"alt\", captionDelay: 250});\n\nconst myForm = document.querySelector(\".form\");\nconst imagesList = document.querySelector('.images_container');\n\nconst spinner = document.querySelector(\".loader\");\n\nmyForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    imagesList.innerHTML = \"\";\n    const query = event.target.elements.query.value.trim();\n\n    if(!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'You should input something',\n            position: 'topCenter',\n        });\n\n\n    } else {\n        spinner.hidden = false;\n\n        searchImage(query)\n            .then(data => {\n\n                if(data.hits.length != 0) {\n                    const markup = imagesTemplate(data.hits);\n                    imagesList.innerHTML = markup;\n                    \n                    lightbox.refresh();\n\n                } else {\n                    iziToast.error({\n                        title: 'Error',\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        position: 'topCenter',\n                    });\n                }\n                \n            })\n            .catch(err => {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Failed to fetch data. Please try again later!',\n                    position: 'topCenter',\n                });\n            })\n            .finally(() => {\n                spinner.hidden = true;\n            })\n    }  \n\n    \n});\n\nfunction searchImage(query) {\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const params = new URLSearchParams({\n        key: '44028683-118753c7a8296875ea6775d6e',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: '9',\n    });\n\n    const url = `${BASE_URL}?${params}`;\n\n    return fetch(url)\n          .then(response => response.json());\n}\n\nfunction imageTemplate(image){\n    return `\n    <div class=\"gallery_block\">\n    <a href=\"${image.largeImageURL}\">\n    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"picture\"></a>\n    <ul class=\"property_list\">\n    <li class=\"property_elem\">Likes <span class=\"span_property\">${image.likes}</span></li>\n    <li class=\"property_elem\">Views <span class=\"span_property\">${image.views}</span></li>\n    <li class=\"property_elem\">Comments <span class=\"span_property\">${image.comments}</span></li>\n    <li class=\"property_elem\">Downloads <span class=\"span_property\">${image.downloads}</span></li>\n    </ul>\n    </div>`;\n    \n}\n\nfunction imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}\n\n\n\n"],"names":["lightbox","SimpleLightbox","myForm","imagesList","spinner","event","query","searchImage","data","markup","imagesTemplate","iziToast","err","BASE_URL","params","url","response","imageTemplate","image","arr"],"mappings":"wvBASA,IAAIA,EAAW,IAAIC,EAAe,mBAAoB,CAAC,aAAc,MAAO,aAAc,GAAG,CAAC,EAE9F,MAAMC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAa,SAAS,cAAc,mBAAmB,EAEvDC,EAAU,SAAS,cAAc,SAAS,EAEhDF,EAAO,iBAAiB,SAAWG,GAAU,CACzCA,EAAM,eAAc,EAEpBF,EAAW,UAAY,GACvB,MAAMG,EAAQD,EAAM,OAAO,SAAS,MAAM,MAAM,OAE5CC,GASAF,EAAQ,OAAS,GAEjBG,EAAYD,CAAK,EACZ,KAAKE,GAAQ,CAEV,GAAGA,EAAK,KAAK,QAAU,EAAG,CACtB,MAAMC,EAASC,EAAeF,EAAK,IAAI,EACvCL,EAAW,UAAYM,EAEvBT,EAAS,QAAO,CAEpC,MACoBW,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WAClC,CAAqB,CAGrB,CAAa,EACA,MAAMC,GAAO,CACVD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,WAC9B,CAAiB,CACjB,CAAa,EACA,QAAQ,IAAM,CACXP,EAAQ,OAAS,EACjC,CAAa,GArCLO,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,6BACT,SAAU,WACtB,CAAS,CAqCT,CAAC,EAED,SAASJ,EAAYD,EAAO,CACxB,MAAMO,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGR,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GAClB,CAAK,EAEKS,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAEjC,OAAO,MAAMC,CAAG,EACT,KAAKC,GAAYA,EAAS,KAAM,CAAA,CAC3C,CAEA,SAASC,EAAcC,EAAM,CACzB,MAAO;AAAA;AAAA,eAEIA,EAAM,aAAa;AAAA,gBAClBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,kEAEYA,EAAM,KAAK;AAAA,kEACXA,EAAM,KAAK;AAAA,qEACRA,EAAM,QAAQ;AAAA,sEACbA,EAAM,SAAS;AAAA;AAAA,WAIrF,CAEA,SAASR,EAAeS,EAAK,CACzB,OAAOA,EAAI,IAAIF,CAAa,EAAE,KAAK,EAAE,CACzC"}